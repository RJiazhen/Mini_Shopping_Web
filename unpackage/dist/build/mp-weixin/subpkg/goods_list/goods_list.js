"use strict";const s=require("../../common/vendor.js"),o={data:()=>({queryObj:{query:"",cid:"",pagenum:1,pagesize:10},goodsList:[],total:0,isloading:!1}),onLoad(s){this.queryObj.query=s.query||"",this.queryObj.cid=s.cid||"",this.getGoodsList()},methods:{async getGoodsList(o){this.isloading=!0;const{data:t}=await s.index.$http.get("/api/public/v1/goods/search",this.queryObj);if(200!==t.meta.status)return s.index.$showMsg();this.goodsList=[...this.goodsList,...t.message.goods],this.total=t.message.total,this.isloading=!1,o&&o()},gotoGoodsDetail(o){s.index.navigateTo({url:"/subpkg/goods_detail/goods_detail?goods_id="+o.goods_id})}},onReachBottom(){if(this.queryObj.pagenum*this.queryObj.pagesize>=this.total)return s.index.$showMsg("数据加载完毕");this.isloading||(this.queryObj.pagenum++,this.getGoodsList())},onPullDownRefresh(){this.queryObj.pagenum=1,this.total=0,this.isloading=!1,this.goodsList=[],this.getGoodsList((()=>s.index.stopPullDownRefresh()))}};if(!Array){s.resolveComponent("my-goods")()}Math;const t=s._export_sfc(o,[["render",function(o,t,i,e,a,d){return{a:s.f(a.goodsList,((o,t,i)=>({a:"500dae24-0-"+i,b:s.p({goods:o}),c:t,d:s.o((s=>d.gotoGoodsDetail(o)),t)})))}}]]);wx.createPage(t);
