"use strict";const o=require("../../common/vendor.js"),t={computed:{...o.mapState("m_cart",[]),...o.mapGetters("m_cart",["total"])},watch:{total:{handler(o){const t=this.options.find((o=>"购物车"===o.text));t&&(t.info=o)},immediate:!0}},data:()=>({goods_info:{},options:[{icon:"shop",text:"店铺"},{icon:"cart",text:"购物车",info:0}],buttonGroup:[{text:"加入购物车",backgroundColor:"#ff0000",color:"#fff"},{text:"立即购买",backgroundColor:"#ffa200",color:"#fff"}]}),onLoad(o){const t=o.goods_id;this.getGoodsDetail(t)},methods:{...o.mapMutations("m_cart",["addToCart"]),async getGoodsDetail(t){const{data:s}=await o.index.$http.get("/api/public/v1/goods/detail",{goods_id:t});if(200!==s.meta.status)return o.index.$showMsg("");s.message.goods_introduce=s.message.goods_introduce.replace(/<img /g,'<img style="display:block;"').replace(/webp/g,"jpg"),this.goods_info=s.message},preview(t){o.index.previewImage({current:t,urls:this.goods_info.pics.map((o=>o.pics_big)),complete:()=>{console.log("complete")}})},onClick(t){"购物车"===t.content.text&&o.index.switchTab({url:"/pages/cart/cart"})},buttonClick(o){if("加入购物车"===o.content.text){const o={goods_id:this.goods_info.goods_id,goods_name:this.goods_info.goods_name,goods_price:this.goods_info.goods_price,goods_count:1,goods_small_logo:this.goods_info.goods_small_logo,goods_state:!0};this.addToCart(o)}}}};if(!Array){(o.resolveComponent("uni-icons")+o.resolveComponent("uni-goods-nav"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-goods-nav/components/uni-goods-nav/uni-goods-nav.js"))();const s=o._export_sfc(t,[["render",function(t,s,i,n,e,d){return o.e({a:e.goods_info.goods_name},e.goods_info.goods_name?{b:o.f(e.goods_info.pics,((t,s,i)=>({a:t.pics_big,b:o.o((o=>d.preview(s)),s),c:s}))),c:o.t(e.goods_info.goods_price),d:o.t(e.goods_info.goods_name),e:o.p({type:"star",size:"18",color:"gray"})}:{},{f:o.o(d.onClick),g:o.o(d.buttonClick),h:o.p({options:e.options,fill:!0,"button-group":e.buttonGroup}),i:e.goods_info.goods_introduce})}]]);wx.createPage(s);
